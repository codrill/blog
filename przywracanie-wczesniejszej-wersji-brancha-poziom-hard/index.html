<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.13.3"/><title data-react-helmet="true"></title><link rel="shortcut icon" href="/blog/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/blog/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/blog/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/blog/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/blog/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/blog/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/blog/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/blog/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/blog/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/blog/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><link as="script" rel="preload" href="/blog/webpack-runtime-f62fda77b0758f234c0d.js"/><link as="script" rel="preload" href="/blog/app-d4548a422512532a7bee.js"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-post-js-3796c449a07c2e88722f.js"/><link as="fetch" rel="preload" href="/blog/page-data/przywracanie-wczesniejszej-wersji-brancha-poziom-hard/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><header style="text-align:center"><h2><a href="/blog/">Web Chunks</a></h2><p>Blog technologiczny - frontend, backend, UX, UI, SEO</p></header><h1>Przywracanie wersji brancha - poziom &#x27;hard&#x27;</h1><div class="postMeta" style="margin-bottom:10px"><span style="font-weight:700">Data: </span><span style="padding:10px">2019-07-16</span><span style="font-weight:700">Kategorie: </span><span style="padding:10px">git, organizacja pracy</span><span style="font-weight:700">Poziom: </span><span style="padding:10px">średni</span></div><div class="blogContent"><p>Dzisiaj weźmiemy na tapetę przykład z życia i to całkiem świeży - okazało się, że na branchu
<code>master</code> mamy nie to co powinniśmy mieć.. I to od jakiegoś czasu.  </p>
<p>Krótka anegdotka, czyli historia o tym jak się nam posypał <code>master</code> branch:</p>
<p>Robiliśmy mały projekcik i chcieliśmy go opublikować na github pages a proces deploymentu zautomatyzować za pomocą bibliotek
<code>gh-pages</code>. Wszystko ładnie, pięknie, gdyby nie to, że prawie na samym początku, w konfiguracji mieliśmy omyłkowo
ustawionego deploya na branch <code>master</code>.</p>
<p>Sprawa wyszła na jaw dopiero po kilku kolejnych commitach do <code>develop</code>a - gdy chcieliśmy zrobić kolejnego deploya.
Oczywiście nie mogliśmy dograć najnowszego <code>develop</code>a do <code>master</code>a, ponieważ <code>develop</code> powinien najpierw dociągnąć
najnowszą wersję z głównego brancha.. Ale tego nie chcieliśmy, bo <code>master</code> miał tylko pliki produkcyjne i nic więcej. </p>
<p>Pojawiło się pytanie: </p>
<p>Jak sprawić, aby branch <code>master</code> wrócił do stanu użyteczności, a przy okazji nie mieszać za bardzo w gitowej historii?</p>
<p>Istnieje coś takiego jak <code>git revert &#x3C;commit_id></code> - jednak ta komenda sprawia, że powstaje nowy commit ze 'starymi' zmianami.
Może nie zawsze jest to złe rozwiązanie, jednak już kiedyś musiałem robić reverta do reverta i takie commity słabo wyglądają w historii gita.</p>
<p>Z pomocą przychodzą dwa polecenia, ściśle ze sobą powiązane: </p>
<p><code>git reset --hard &#x3C;commit_id></code> - spowoduje przywracenie naszego lokalny branch do stanu z commita, którego ID mu przekażemy</p>
<p><code>git push origin &#x3C;branch_name> -f</code> - wypushuje nasze lokalne zmiany do brancha, nadpisując jednocześnie jego historie. </p>
<p>Oczywiście polecenia wywołujemy będąc na skopanym branchu (w naszym przypadku był to <code>master</code>).</p>
<p>Po tym zabiegu, mogliśmy już normalnie zrobić Pull Requesta, z z brancha <code>develop</code> do brancha <code>master</code>. Wszystkie zmiany były
pięknie wyświetlone, a historia brancha <code>master</code> pozostała niezbrukana.</p>
<p>Z tego też powodu, dobrze mieć brancha <code>develop</code> - do którego mergujemy feature branche i który powinien
(w większym lub mniejszym stopniu) także być stabilny, a nie ładować każdy nowy feature bezpośrednio do mastera. </p>
<p>*<em>Powyższe rozwiązanie <strong>nie jest</strong> zalecane do notorycznego używania w codziennej pracy z GITem.
Ponieważ w ten sposób manipulujemy historią GITa, a nie o to chodzi w systemie kontroli wersji.
Traktujcie je raczej jako sposób radzenia sobie z sytuacją, gdy coś nieoczekiwanie, pójdzie bardzo źle - przykładowo
wszystkie źródła zastąpicie plikami produkcyjnymi ;)</em></p></div><a href="/blog/witaj-swiecie">Poprzedni post</a></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/przywracanie-wczesniejszej-wersji-brancha-poziom-hard";window.webpackCompilationHash="c3269c4a472af8fc7031";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d4548a422512532a7bee.js"],"component---src-templates-all-categories-index-js":["/component---src-templates-all-categories-index-js-bde37e21ad5b39c28974.js"],"component---src-templates-single-category-index-js":["/component---src-templates-single-category-index-js-f3e69beb8089096ae160.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-3796c449a07c2e88722f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e1878786b3381c20ccc1.js"],"component---src-pages-index-js":["/component---src-pages-index-js-598cb09c65b531ae23cc.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-ab782966f1ee4aabbf28.js"]};/*]]>*/</script><script src="/blog/component---src-templates-blog-post-js-3796c449a07c2e88722f.js" async=""></script><script src="/blog/app-d4548a422512532a7bee.js" async=""></script><script src="/blog/webpack-runtime-f62fda77b0758f234c0d.js" async=""></script></body></html>